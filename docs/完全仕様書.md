---
title: MyVoice Maker 完全仕様書（音声生成）
updated: 2026-01-05
---

# MyVoice Maker 完全仕様書（音声生成）

このドキュメントは、MyVoice Maker を **原稿CSV → MP3 音声生成** に特化した仕様としてまとめたものです。

## 目的

- 原稿CSV（`index,script`）から、行ごとのナレーション音声（MP3）を生成する
- 話者音声サンプルから、XTTS v2 の **話者埋め込み（voiceキャッシュ）** を事前生成して保存し、生成を安定化/高速化する

## 入出力

### 入力

- 原稿CSV: `input/原稿.csv`（または Web UI からアップロードされたCSV）
- 話者サンプル: `src/voice/models/samples/sample_XX.wav`

### 出力

- `output/voice_000.mp3` など（`index` を 3桁ゼロ埋めしたファイル名）
- 中間ファイル: `output/temp/*.wav`（生成前に全削除）

## 主要フロー（Web UI）

1. 原稿CSV入力
2. 録音（話者サンプルを追加保存）
3. 音声生成モデル構築
   - 参照音声から話者埋め込みを生成し、`src/voice/models/voices/myvoice.pth` に保存
4. 音声生成
   - `output/temp` を全削除
  - 行ごとに音声生成し、`output/voice_XXX.mp3` を上書き

## UI要件（抜粋）

- 左サイドバーに4ボタン
  - 原稿csv入力 / 録音 / 音声生成モデル構築 / 音声生成
- 「音声生成モデル構築」押下時: 「モデル構築中」を表示
- 「音声生成」押下時: 「音声生成中（処理中/全数）」を表示
- 生成前に `output/temp` を全削除してから処理開始
- 原稿リストは行ごとに以下の操作を提供
  - 音声生成（当該行のみ上書き生成）
  - 音声再生（既存MP3を再生）

## API（抜粋）

- `POST /api/upload/csv`
- `POST /api/upload/recording`
- `POST /api/build_voice_model`
- `POST /api/generate_audio`
- `POST /api/clear_temp`

## データ保存（抜粋）

- 話者キャッシュ: `src/voice/models/voices/myvoice.pth`
- 設定: `src/voice/models/tts_model.json`（`speaker_wav` / `voice_id` / `voice_dir` など）

詳細仕様は `specs/001-MyVoice-Maker/` を参照してください。
